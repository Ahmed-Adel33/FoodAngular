"use strict";(self.webpackChunkFood_project_angular=self.webpackChunkFood_project_angular||[]).push([[0],{3e3:(H,_,r)=>{r.r(_),r.d(_,{RecipesModule:()=>V});var d=r(6814),T=r(7027),e=r(5879),f=r(4400),Z=r(7862),v=r(7700),b=r(2425),c=r(4581),A=r(4945),a=r(6223);function R(i,s){if(1&i&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function x(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function y(i,s){if(1&i&&(e.ynx(0),e.YNc(1,x,2,1,"span",22),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.category)}}function U(i,s){1&i&&(e.TgZ(0,"span")(1,"div"),e._UZ(2,"img",35),e.qZA()())}const C=function(i){return["/dashboard/admin/recipes/view",i]},q=function(i){return["/dashboard/admin/recipes/edit",i]};function I(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._UZ(4,"img",24),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,y,2,1,"ng-container",17),e.YNc(13,U,3,0,"span",17),e.qZA(),e.TgZ(14,"td",25)(15,"div",26)(16,"button",27),e._UZ(17,"i",28),e.qZA(),e.TgZ(18,"ul",29)(19,"li")(20,"a",30)(21,"span"),e._UZ(22,"i",31),e.qZA(),e.TgZ(23,"span"),e._uU(24,"View"),e.qZA()()(),e.TgZ(25,"li")(26,"a",30)(27,"span"),e._UZ(28,"i",32),e.qZA(),e.TgZ(29,"span"),e._uU(30,"Edit"),e.qZA()()(),e.TgZ(31,"li")(32,"a",33),e.NdJ("click",function(){const p=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.openDeleteDialog(p))}),e.TgZ(33,"span"),e._UZ(34,"i",34),e.qZA(),e.TgZ(35,"span"),e._uU(36,"delete"),e.qZA()()()()()()()}if(2&i){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("src","https://upskilling-egypt.com/"+t.imagePath,e.LSH),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.tag.name),e.xp6(2),e.Q6J("ngIf",t.category.length>0),e.xp6(1),e.Q6J("ngIf",0==t.category.length),e.xp6(7),e.Q6J("routerLink",e.VKq(9,C,t.id)),e.xp6(6),e.Q6J("routerLink",e.VKq(11,q,t.id))}}function F(i,s){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,I,37,13,"tr",22),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.TableData)}}function N(i,s){1&i&&(e.TgZ(0,"div")(1,"div"),e._UZ(2,"img",35),e.qZA()())}const S=function(){return[5,10,20]};let w=(()=>{class i{constructor(t,n,o,p){this._RecipeService=t,this._HelperService=n,this.dialog=o,this._ToastrService=p,this.Message="",this.searchValue="",this.pageSize=20,this.pageNumber=1,this.TableData=[]=[],this.tags=[]}ngOnInit(){this.getAllTags(),this.gettableData()}gettableData(){this._RecipeService.getRecipes({pageSize:this.pageSize,PageNumber:this.pageNumber,name:this.searchValue,tagId:this.tagId}).subscribe({next:n=>{this.TableResponse=n,this.TableData=this.TableResponse?.data,console.log(this.TableData?.length)}})}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}ondeleteRecipe(t){this._RecipeService.deleteRecipes(t).subscribe({next:n=>{this.TableResponse=n,this.TableData=this.TableResponse?.data,this.Message=n.message},error:n=>{console.log(n.error.message)},complete:()=>{this._ToastrService.success(this.Message," successfully"),this.gettableData()}})}openDeleteDialog(t){console.log(t),this.dialog.open(T.F,{data:t,width:"40%"}).afterClosed().subscribe(o=>{console.log("The dialog was closed"),console.log(o),console.log(o.id),o&&this.ondeleteRecipe(o.id)})}handlePageEvent(t){console.log(t),this.pageSize=t.pageSize,this.pageNumber=this.TableResponse?.pageNumber,this.gettableData()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(f.j),e.Y36(Z.W),e.Y36(v.uw),e.Y36(b._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:51,vars:11,consts:[[1,"page-header"],[1,"container"],[1,"row","align-items-center","p-5"],[1,"col-9"],[1,"col-3"],[1,"text-end"],["src","assets/images/menu-avatar.svg","alt","",1,"w-75"],[1,"container","py-4"],[1,"row","py-3"],[1,"col-md-6"],["type","text","placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-3"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],["routerLink","/dashboard/admin/recipes/add",1,"primary"],[1,"table","table-striped"],[4,"ngIf"],[1,"bg-info"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["paginator",""],[3,"value"],[4,"ngFor","ngForOf"],[1,"w-25"],[1,"w-100",3,"src"],[1,"text-center"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","text-muted"],[1,"fa-solid","fa-ellipsis","fa-2x"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-eye","text-main"],[1,"fa-solid","fa-pen-to-square","text-main"],[1,"dropdown-item",3,"click"],[1,"fa-solid","fa-trash-can","text-main"],["src","assets/images/Not Found.svg","alt","",1,"w-100"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e._uU(5," Recipes "),e.TgZ(6,"span"),e._uU(7,"item"),e.qZA()(),e.TgZ(8,"p"),e._uU(9,"You can now add your items that any user can order it from the Application and you can edit "),e.qZA()(),e.TgZ(10,"div",4)(11,"div",5),e._UZ(12,"img",6),e.qZA()()()()(),e.TgZ(13,"section")(14,"div",7)(15,"div",8)(16,"div",9)(17,"input",10),e.NdJ("ngModelChange",function(l){return o.searchValue=l})("keyup",function(){return o.gettableData()}),e.qZA()(),e.TgZ(18,"div",11)(19,"select",12),e.NdJ("ngModelChange",function(l){return o.tagId=l})("change",function(){return o.gettableData()}),e.TgZ(20,"option",13),e._uU(21,"All"),e.qZA(),e.YNc(22,R,2,2,"option",14),e.qZA(),e.TgZ(23,"h2"),e._uU(24),e.qZA()(),e.TgZ(25,"div",11)(26,"button",15),e._uU(27,"Add New Recipe"),e.qZA()()(),e.TgZ(28,"table",16)(29,"thead")(30,"tr")(31,"th"),e._uU(32,"Name"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Image"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"Price "),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Descrption"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Tag"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Category"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Actions"),e.qZA()()(),e.YNc(45,F,2,1,"tbody",17),e.YNc(46,N,3,0,"div",17),e.qZA(),e._UZ(47,"div",18),e.TgZ(48,"div",18)(49,"mat-paginator",19,20),e.NdJ("page",function(l){return o.handlePageEvent(l)}),e.qZA()()()()),2&n&&(e.xp6(17),e.Q6J("ngModel",o.searchValue),e.xp6(2),e.Q6J("ngModel",o.tagId),e.xp6(3),e.Q6J("ngForOf",o.tags),e.xp6(2),e.Oqu(o.tagId),e.xp6(21),e.Q6J("ngIf",null==o.TableData?null:o.TableData.length),e.xp6(1),e.Q6J("ngIf",0==(null==o.TableData?null:o.TableData.length)),e.xp6(3),e.Q6J("length",null==o.TableResponse?null:o.TableResponse.totalNumberOfRecords)("pageSize",null==o.TableResponse?null:o.TableResponse.pageSize)("pageSizeOptions",e.DdM(10,S))("pageIndex",null==o.TableResponse?null:o.TableResponse.pageNumber))},dependencies:[d.sg,d.O5,c.rH,A.NW,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]})}return i})();var J=r(4049),D=r(6586),g=r(4426);function z(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function O(i,s){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function E(i,s){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"i",28),e._uU(2," Drag & Drop or "),e.TgZ(3,"span",2),e._uU(4,"choose a Item Image "),e.qZA(),e._uU(5,"to Upload"),e.qZA())}function M(i,s){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"img",29),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function Q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",30),e.NdJ("removed",function(){const p=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onRemove(p))}),e.qZA()}2&i&&e.Q6J("file",s.$implicit)("removable",!0)}function Y(i,s){1&i&&(e.TgZ(0,"button",31),e._uU(1,"Save"),e.qZA())}function L(i,s){1&i&&(e.TgZ(0,"button",32),e._UZ(1,"app-button-loader"),e.qZA())}let m=(()=>{class i{constructor(t,n,o,p,l,j){this.route=t,this._HelperService=n,this._RecipeService=o,this._ActivatedRoute=p,this.router=l,this.toastr=j,this.isEditMode=!1,this.isAddMode=!0,this.isUpdate=!1,this.Message="",this.tags=[],this.Categories=[],this.isUpdatedPage=!1,this.RecipeForm=new a.cw({name:new a.NI(null),description:new a.NI(null),price:new a.NI(null),tagId:new a.NI(null),categoriesIds:new a.NI(null)}),this.isLoading=!1,this.files=[],this.recipeId=p.snapshot.params.id,this.recipeId?(this.getRecipesById(this.recipeId),this.isUpdatedPage=!0,this.route.url.subscribe(u=>{this.isEditMode=u.some(h=>"edit"===h.path),this.disableFormControls()}),this.route.url.subscribe(u=>{this.isAddMode=u.some(h=>"add"===h.path),this.enableFormControls()})):this.isUpdatedPage=!1}ngOnInit(){this.getAllTags(),this.getAllCategories()}disableFormControls(){this.isEditMode||(this.RecipeForm.get("name")?.disable(),this.RecipeForm.get("price")?.disable(),this.RecipeForm.get("description")?.disable(),this.RecipeForm.get("tagId")?.disable(),this.RecipeForm.get("categoriesIds")?.disable(),this.RecipeForm.get("recipeImage")?.disable())}enableFormControls(){this.isAddMode&&(this.RecipeForm.get("name")?.enable(),this.RecipeForm.get("price")?.enable(),this.RecipeForm.get("description")?.enable(),this.RecipeForm.get("tagId")?.enable(),this.RecipeForm.get("categoriesIds")?.enable(),this.RecipeForm.get("recipeImage")?.enable())}getRecipesById(t){this._RecipeService.getRecipeById(t).subscribe({next:n=>{console.log(n),this.recipeData=n},error:n=>{},complete:()=>{this.imgSrc="https://upskilling-egypt.com:443/api/v1/"+this.recipeData+this.imgSrc,this.RecipeForm.patchValue({name:this.recipeData?.name,price:this.recipeData?.price,description:this.recipeData?.description,tagId:this.recipeData?.tag.id,categoriesIds:this.recipeData?.category[0].id})}})}onSubmit(t){this.isLoading=!0,console.log(t.value);let n=new FormData;n.append("name",t.value.name),n.append("price",t.value.price),n.append("description",t.value.description),n.append("categoriesIds",t.value.categoriesIds),n.append("tagId",t.value.tagId),n.append("recipeImage",this.imgSrc,this.imgSrc.name),this.recipeId?this._RecipeService.editRecipe(this.recipeId,n).subscribe({next:o=>{console.log(o)},error:()=>{this.isLoading=!1},complete:()=>{this.isLoading=!1,this.toastr.success("Recipe updated","successfuly"),this.router.navigate(["/dashboard/admin/recipes"])}}):this._RecipeService.addRecipe(n).subscribe({next:o=>{console.log(o)},error:()=>{},complete:()=>{this.router.navigate(["/dashboard/admin/recipes"]),this.toastr.success(this.Message,"successfully!")}})}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{this.tags=t,console.log(t)}})}getAllCategories(){this._HelperService.getCategories().subscribe({next:t=>{this.Categories=t.data,console.log(t)}})}onSelect(t){console.log(t),this.imgSrc=t.addedFiles[0],this.files.push(...t.addedFiles)}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(c.gz),e.Y36(Z.W),e.Y36(f.j),e.Y36(c.gz),e.Y36(c.F0),e.Y36(b._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-editRecipe"]],decls:59,vars:9,consts:[[1,"container"],[1,"pt-5"],[1,"text-main"],[1,"home-head","p-5","align-items-center","d-flex","justify-content-between"],["routerLink","/dashboard/admin/recipes",1,"btn","btn-success"],[1,"fa-solid","fa-arrow-right"],[3,"formGroup","ngSubmit"],[1,"row","card-auth","shadow-sm"],[1,"col-md-10","mx-auto"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-mobile-screen"],["formControlName","name","type","text","placeholder","Recipe Name","aria-label","Enter your Email","aria-describedby","basic-addon1",1,"form-control"],["formControlName","price","type","number","placeholder","Price","aria-label","Enter your Email","aria-describedby","basic-addon1",1,"form-control"],["for",""],["formControlName","tagId","aria-label","Default select example",1,"form-select"],["selected",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","categoriesIds","aria-label","Default select example",1,"form-select"],["formControlName","description","type","text","placeholder"," Description","aria-label","Enter your Email","aria-describedby","basic-addon1",1,"form-control"],[3,"multiple","change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],[1,"text-end","py-2"],["type","button",1,"outline-primary"],["class","primary my-2",4,"ngIf"],["class","primary w-25",4,"ngIf"],[3,"ngValue"],[1,"fa-solid","fa-arrow-up-from-bracket","d-block"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[1,"primary","my-2"],[1,"primary","w-25"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"section")(2,"h2",1),e._uU(3,"Fill the "),e.TgZ(4,"span",2),e._uU(5,"Recipes !"),e.qZA()(),e.TgZ(6,"div",3)(7,"p"),e._uU(8,"you can now fill the meals easily using the table and form , click here and sill it with the table !"),e.qZA(),e.TgZ(9,"button",4),e._uU(10,"All Recipes "),e._UZ(11,"i",5),e.qZA()(),e._UZ(12,"div"),e.qZA(),e.TgZ(13,"form",6),e.NdJ("ngSubmit",function(){return o.onSubmit(o.RecipeForm)}),e.TgZ(14,"div",7)(15,"div",8)(16,"div",9)(17,"span",10),e._UZ(18,"i",11),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.TgZ(20,"div",9)(21,"span",10),e._UZ(22,"i",11),e.qZA(),e._UZ(23,"input",13),e.qZA(),e.TgZ(24,"div")(25,"label",14),e._uU(26,"Tag"),e.qZA(),e.TgZ(27,"div",9)(28,"span",10),e._UZ(29,"i",11),e.qZA(),e.TgZ(30,"select",15)(31,"option",16),e._uU(32,"All"),e.qZA(),e.YNc(33,z,2,2,"option",17),e.qZA()()(),e.TgZ(34,"div")(35,"label",14),e._uU(36,"category"),e.qZA(),e.TgZ(37,"div",9)(38,"span",10),e._UZ(39,"i",11),e.qZA(),e.TgZ(40,"select",18)(41,"option",16),e._uU(42,"All"),e.qZA(),e.YNc(43,O,2,2,"option",17),e.qZA()()(),e.TgZ(44,"div",9)(45,"span",10),e._UZ(46,"i",11),e.qZA(),e.TgZ(47,"textarea",19),e._uU(48,"      "),e.qZA()(),e.TgZ(49,"div")(50,"ngx-dropzone",20),e.NdJ("change",function(l){return o.onSelect(l)}),e.YNc(51,E,6,0,"ngx-dropzone-label",21),e.YNc(52,M,2,1,"ngx-dropzone-label",21),e.YNc(53,Q,1,2,"ngx-dropzone-image-preview",22),e.qZA()(),e.TgZ(54,"div",23)(55,"button",24),e._uU(56,"Cancel"),e.qZA(),e.YNc(57,Y,2,0,"button",25),e.YNc(58,L,2,0,"button",26),e.qZA()()()()()),2&n&&(e.xp6(13),e.Q6J("formGroup",o.RecipeForm),e.xp6(20),e.Q6J("ngForOf",o.tags),e.xp6(10),e.Q6J("ngForOf",o.Categories),e.xp6(7),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",!o.imgSrc),e.xp6(1),e.Q6J("ngIf",o.imgSrc),e.xp6(1),e.Q6J("ngForOf",o.files),e.xp6(4),e.Q6J("ngIf",0==o.isLoading),e.xp6(1),e.Q6J("ngIf",1==o.isLoading))},dependencies:[d.sg,d.O5,c.rH,D.G,g._f,g.NP,g.sv,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u],styles:["button[_ngcontent-%COMP%]{margin-right:16px}"]})}return i})();const P=[{path:"",component:w},{path:"add",component:m},{path:"edit/:id",component:m},{path:"view/:id",component:m}];let V=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.ez,c.Bz.forChild(P),J.S]})}return i})()}}]);